{
  "foundation_type_determination": {
    "description": "ボーリング柱状図と建物条件に基づく基礎種別判定システム",
    "note": "判定順序に従って条件をチェックし、最初に合致したものを基礎種別とする",
    "required_inputs": {
      "building_info": {
        "ground_floors": "建物の地上階数",
        "basement_floors": "地下階数（ある場合）"
      },
      "ground_evaluation": "地盤評価（硬質地盤/中間地盤①/中間地盤②/軟弱地盤）",
      "support_layer_depth": "有効な支持層の上端深度（終端支持層または中間支持層）"
    },
    "key_definitions": {
      "有効な支持層": {
        "definition": "基礎として利用可能な支持層",
        "types": [
          "終端支持層（N値≧50の連続層）",
          "中間支持層（N値≧10で厚さ1m以上）※条件による"
        ]
      }
    },
    "determination_rules": [
      {
        "priority": 1,
        "foundation_type": "刃ベタ基礎",
        "condition": {
          "building": {
            "ground_floors": {
              "operator": "<=",
              "value": 3
            }
          },
          "and": {
            "ground_evaluation": {
              "operator": "in",
              "values": ["硬質地盤", "中間地盤①", "中間地盤②"]
            }
          }
        },
        "description": "建物の地上部が3層以内、かつ硬質地盤もしくは中間地盤①②",
        "characteristics": {
          "pile_types": "鋼管杭（刃工法）",
          "cost": "低",
          "construction_period": "短"
        }
      },
      {
        "priority": 2,
        "foundation_type": "礎ベタ基礎",
        "condition": {
          "building": {
            "ground_floors": {
              "operator": ">",
              "value": 3
            }
          },
          "and": {
            "ground_evaluation": {
              "operator": "in",
              "values": ["硬質地盤", "中間地盤①"]
            }
          }
        },
        "description": "建物の地上部が3層を超える、かつ硬質地盤もしくは中間地盤①",
        "characteristics": {
          "pile_types": "鋼管杭（礎工法）",
          "cost": "中",
          "construction_period": "中"
        }
      },
      {
        "priority": 3,
        "foundation_type": "20m杭基礎",
        "condition": {
          "support_layer_depth": {
            "operator": ">",
            "value": 15,
            "unit": "m"
          },
          "and": {
            "support_layer_depth": {
              "operator": "<",
              "value": 24,
              "unit": "m"
            }
          }
        },
        "description": "有効な支持層の上端が深度15mより深く深度24mより浅い",
        "characteristics": {
          "pile_length": "20m級",
          "pile_types": "鋼管杭（要相見積）",
          "cost": "高",
          "construction_period": "長"
        }
      },
      {
        "priority": 4,
        "foundation_type": "30m杭基礎",
        "condition": {
          "support_layer_depth": {
            "operator": ">=",
            "value": 24,
            "unit": "m"
          },
          "and": {
            "support_layer_depth": {
              "operator": "<=",
              "value": 33,
              "unit": "m"
            }
          }
        },
        "description": "有効な支持層の上端が深度24mから33mまで",
        "characteristics": {
          "pile_length": "30m級",
          "pile_types": "鋼管杭（要相見積）",
          "cost": "より高",
          "construction_period": "より長"
        }
      },
      {
        "priority": 5,
        "foundation_type": "40m杭基礎",
        "condition": {
          "support_layer_depth": {
            "operator": ">",
            "value": 33,
            "unit": "m"
          }
        },
        "description": "有効な支持層の上端が深度33mより深い",
        "characteristics": {
          "pile_length": "40m超級",
          "pile_types": "鋼管杭（要相見積）",
          "cost": "最高",
          "construction_period": "最長",
          "note": "特殊工法が必要な場合あり"
        }
      }
    ],
    "determination_process": {
      "step1": "建物の地上階数を確認",
      "step2": "地盤評価を判定（地盤評価判定ロジックを使用）",
      "step3": "有効な支持層の上端深度を特定",
      "step4": "判定順序1から順に条件をチェック",
      "step5": "最初に合致した条件の基礎種別を採用"
    },
    "special_considerations": {
      "mixed_foundation": {
        "condition": "敷地内で支持層深度が大きく変化する場合",
        "solution": "部分的に異なる基礎形式を採用する場合あり"
      },
      "intermediate_support_utilization": {
        "condition": "強固な中間支持層がある場合",
        "solution": "礎ベタ基礎を採用できる可能性あり"
      }
    },
    "output_format": {
      "foundation_type": "基礎種別名",
      "matched_condition": "合致した条件の説明",
      "supporting_data": {
        "building_floors": "建物階数",
        "ground_evaluation": "地盤評価結果",
        "support_layer_depth": "支持層深度"
      },
      "recommendations": {
        "construction_method": "推奨工法",
        "cost_estimate": "概算コストレベル",
        "additional_tests": "追加で必要な土質試験"
      }
    }
  }
}
